(this["webpackJsonpreact-redux-saga"]=this["webpackJsonpreact-redux-saga"]||[]).push([[0],{46:function(e,t,n){e.exports=n(74)},74:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(25),u=n.n(c),o=n(20),l=function(){return a.a.createElement("nav",null,a.a.createElement("div",null,a.a.createElement("h1",null,"Juice store")),a.a.createElement(o.b,{to:"/products/new"},"Add product"))},s=n(3),i=n.n(s),p=n(12),d=n(18),E=n(45),f=n(10),O=n(22),m=n.n(O),D=n(44),b=n.n(D).a.create({baseURL:"http://localhost:4000/"});function h(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(b.get("/products"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))}function _(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(b.post("/products",e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function R(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(b.delete("/products/".concat(e)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function v(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(b.put("/products/".concat(e.id),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}var y=i.a.mark(A),T=i.a.mark(I),w=i.a.mark(L),x=i.a.mark(N),j=i.a.mark(k),P=i.a.mark(S),C=i.a.mark(B),g=i.a.mark(W),U=i.a.mark(G);function A(){var e,t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(f.b)(h);case 3:return e=n.sent,t=e.data,n.next=7,$(t);case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(f.c)(z());case 13:case"end":return n.stop()}}),y,null,[[0,9]])}function I(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)("BEGIN_PRODUCTS_DOWNLOAD",A);case 2:case"end":return e.stop()}}),T)}function L(e){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.product,n.prev=1,n.next=4,Object(f.b)(_,t);case 4:return n.next=6,F(t);case 6:m.a.fire("Correct","The product has been added successfully","success"),n.next=14;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,M(!0);case 13:m.a.fire({icon:"error",title:"Error",text:"An error ocurred. Please, try it again."});case 14:case"end":return n.stop()}}),w,null,[[1,9]])}function N(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)("ADD_PRODUCT",L);case 2:case"end":return e.stop()}}),x)}function k(e){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(f.b)(R,t);case 4:return n.next=6,Q();case 6:m.a.fire("Deleted!","The product has been deleted.","success"),n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,Z();case 13:case"end":return n.stop()}}),j,null,[[1,9]])}function S(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)("RETRIEVE_PRODUCT_DELETE",k);case 2:case"end":return e.stop()}}),P)}function B(e){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.product,n.prev=1,n.next=4,Object(f.b)(v,t);case 4:return n.next=6,ee(t);case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),n.next=12,te();case 12:case"end":return n.stop()}}),C,null,[[1,8]])}function W(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)("BEGIN_EDIT_PRODUCT",B);case 2:case"end":return e.stop()}}),g)}function G(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([I(),N(),S(),W()]);case 2:case"end":return e.stop()}}),U)}var K=n(7),V={products:[],error:!1,loading:!1,deleteProduct:null},H={alert:null},X=Object(d.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BEGIN_PRODUCTS_DOWNLOAD":case"ADD_PRODUCT":case"BEGIN_EDIT_PRODUCT":return Object(K.a)({},e,{loading:t.payload,product:t.product});case"ADD_PRODUCT_OK":return Object(K.a)({},e,{loading:!1});case"ADD_PRODUCT_ERROR":case"PRODUCTS_DOWNLOAD_ERROR":case"PRODUCT_DELETED_ERROR":case"PRODUCT_EDITED_ERROR":return Object(K.a)({},e,{loading:!1,error:t.payload});case"PRODUCTS_DOWNLOAD_OK":return Object(K.a)({},e,{loading:!1,error:null,products:t.payload});case"RETRIEVE_PRODUCT_DELETE":return Object(K.a)({},e,{deleteProduct:t.payload});case"PRODUCT_DELETED_OK":return Object(K.a)({},e,{products:e.products.filter((function(t){return t.id!==e.deleteProduct})),deleteProduct:null});case"RETRIEVE_PRODUCT_EDITED":return Object(K.a)({},e,{editProduct:t.payload});case"PRODUCT_EDITED_OK":return Object(K.a)({},e,{editProduct:null,products:e.products.map((function(e){return e.id===t.payload.id?e=t.payload:e}))});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ALERT":return Object(K.a)({},e,{alert:t.payload});case"HIDE_ALERT":return Object(K.a)({},e,{alert:null});default:return e}}}),J=Object(E.a)(),Y=Object(d.e)(X,Object(d.d)(Object(d.a)(J),"object"===typeof window&&(window.__REDUX_DEVTOOLS_EXTENSION__,1)?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));J.run(G);var q=Y,$=function(e){return q.dispatch(function(e){return{type:"PRODUCTS_DOWNLOAD_OK",payload:e}}(e))},z=function(){return q.dispatch({type:"PRODUCTS_DOWNLOAD_ERROR",payload:!0})},F=function(){return q.dispatch({type:"BEGIN_PRODUCTS_DOWNLOAD",payload:!0})},M=function(e){return q.dispatch(function(e){return{type:"ADD_PRODUCT_ERROR",payload:e}}(e))},Q=function(){return q.dispatch({type:"PRODUCT_DELETED_OK"})},Z=function(){return q.dispatch({type:"PRODUCT_DELETED_ERROR",payload:!0})},ee=function(e){return q.dispatch(function(e){return{type:"PRODUCT_EDITED_OK",payload:e}}(e))},te=function(){return q.dispatch({type:"PRODUCT_EDITED_ERROR",payload:!0})},ne=n(19),re=function(e){var t=Object(ne.f)(),n=e.name,r=e.price,c=e.id,u=function(e){m.a.fire({title:"Are you sure you want to delete the product?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.value&&function(e){q.dispatch(function(e){return{type:"RETRIEVE_PRODUCT_DELETE",payload:e}}(e))}(e)}))},o=function(e){!function(e){q.dispatch(function(e){return{type:"RETRIEVE_PRODUCT_EDITED",payload:e}}(e))}(e),t.push("products/edit/".concat(c))};return a.a.createElement("tr",null,a.a.createElement("td",null,n),a.a.createElement("td",null,r),a.a.createElement("td",null,c),a.a.createElement("td",null,a.a.createElement("button",{type:"button",onClick:function(){return o(e)}},"Edit"),a.a.createElement("button",{type:"button",onClick:function(){return u(c)}},"Delete")))},ae=function(){Object(r.useEffect)((function(){i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(q.dispatch({type:"BEGIN_PRODUCTS_DOWNLOAD",payload:!0}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))}),[]);var e=Object(p.b)((function(e){return e.products.products})),t=Object(p.b)((function(e){return e.products.error})),n=Object(p.b)((function(e){return e.products.loading}));return a.a.createElement("div",null,a.a.createElement("h1",null,"Products"),t?a.a.createElement("p",null,"An error ocurred"):null,n?a.a.createElement("p",null,"Loading..."):null,a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Price"),a.a.createElement("th",null,"Id"),a.a.createElement("th",null,"Actions"))),a.a.createElement("tbody",null,0===e.length?"No products yet.":e.map((function(e){return a.a.createElement(re,{key:e.id,name:e.name,price:e.price,id:e.id})})))))},ce=n(24),ue=function(e){return q.dispatch(function(e){return{type:"SHOW_ALERT",payload:e}}(e))},oe=function(e){var t=e.history,n=Object(r.useState)(""),c=Object(ce.a)(n,2),u=c[0],o=c[1],l=Object(r.useState)(0),s=Object(ce.a)(l,2),d=s[0],E=s[1],f=Object(p.b)((function(e){return e.products.loading})),O=Object(p.b)((function(e){return e.products.error})),m=Object(p.b)((function(e){return e.alert.alert}));return a.a.createElement("div",null,a.a.createElement("h1",null,"Add new product"),m?a.a.createElement("p",null,m.msg):null,a.a.createElement("form",{onSubmit:function(e){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),!(""===u.trim()||d<=0)){n.next=5;break}return ue({msg:"All fields are required."}),n.abrupt("return");case 5:return q.dispatch({type:"HIDE_ALERT",payload:null}),n.next=8,i.a.awrap((r={name:u,price:d},q.dispatch(function(e){return{type:"ADD_PRODUCT",payload:!0,product:e}}(r))));case 8:t.push("/");case 9:case"end":return n.stop()}var r}))}},a.a.createElement("section",null,a.a.createElement("label",null,"Product name"),a.a.createElement("input",{type:"text",placeholder:"Product name",name:"name",value:u,onChange:function(e){return o(e.target.value)}})),a.a.createElement("section",null,a.a.createElement("label",null,"Product price"),a.a.createElement("input",{type:"number",name:"price",min:"0",value:d,onChange:function(e){return E(Number(e.target.value))}})),a.a.createElement("button",null,"Add new")),f?a.a.createElement("p",null,"Loading..."):null,O?a.a.createElement("p",null,"Ups! An error ocurred."):null)},le=n(27),se=function(){var e=Object(ne.f)(),t=Object(p.b)((function(e){return e.products.editProduct})),n=Object(r.useState)({name:"",price:""}),c=Object(ce.a)(n,2),u=c[0],o=c[1];Object(r.useEffect)((function(){o(t)}),[t]);var l=function(e){o(Object(K.a)({},u,Object(le.a)({},e.target.name,e.target.value)))};return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),function(e){q.dispatch(function(e){return{type:"BEGIN_EDIT_PRODUCT",product:e}}(e))}(u),e.push("/")}},a.a.createElement("h1",null,"Edit product"),a.a.createElement("section",null,a.a.createElement("label",null,"Product name"),a.a.createElement("input",{type:"text",name:"name",value:u.name,onChange:l})),a.a.createElement("section",null,a.a.createElement("label",null,"Product price"),a.a.createElement("input",{type:"number",name:"price",min:"0",value:u.price,onChange:l})),a.a.createElement("button",null,"Save changes")))};var ie=function(){return a.a.createElement(o.a,null,a.a.createElement(p.a,{store:q},a.a.createElement(l,null),a.a.createElement("div",null,a.a.createElement(ne.c,null,a.a.createElement(ne.a,{exact:!0,path:"/",component:ae}),a.a.createElement(ne.a,{exact:!0,path:"/products/new",component:oe}),a.a.createElement(ne.a,{exact:!0,path:"/products/edit/:id",component:se})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[46,1,2]]]);
//# sourceMappingURL=main.50f94570.chunk.js.map